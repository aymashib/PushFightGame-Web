const leaderboardData = [
    {
        "id": 1,
        "player": "Player1",
        "games_played": 16,
        "wins": 1,
        "losses": 15,
        "win_percentage": 6.25,
        "avg_moves_won": 3,
        "avg_duration_per_move": 2.828125,
        "avg_duration_per_turn": 3.2315
    },
    {
        "id": 2,
        "player": "Player2",
        "games_played": 14,
        "wins": 13,
        "losses": 1,
        "win_percentage": 92.8571428571428571,
        "avg_moves_won": 2,
        "avg_duration_per_move": 1.7992857142857143,
        "avg_duration_per_turn": 2.0533285714285714
    },
    {
        "id": 3,
        "_player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 4,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 5,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 6,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 7,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 8,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 9,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 10,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 11,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 12,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 13,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 14,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 15,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 16,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 17,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 18,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 19,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 20,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 21,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 22,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 23,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 24,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 25,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 26,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 27,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 28,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 29,
        "player": "Player1",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 30,
        "player": "Player2",
        "games_played": 0,
        "wins": 0,
        "losses": 0,
        "win_percentage": null,
        "avg_moves_won": 0,
        "avg_duration_per_move": null,
        "avg_duration_per_turn": null
    },
    {
        "id": 31,
        "player": "AI_BOT",
        "games_played": 2,
        "wins": 2,
        "losses": 0,
        "win_percentage": 100,
        "avg_moves_won": 2,
        "avg_duration_per_move": 0,
        "avg_duration_per_turn": 0.00335
    }
]

document.getElementById('searchButton').addEventListener('click', function() {
    const formData = new FormData(document.getElementById('gameQueryForm'));
    const queryParams = {};
    formData.forEach((value, key) => {
        queryParams[key] = value;
    });
    filterAndDisplayGameData(queryParams);
});

function filterAndDisplayGameData(params) {
    const filteredData = leaderboardData.filter(game => {
        if (params.id && game.id != params.id) return false;
        if (params.player && game.player && game.player.toLowerCase() !== params.player.toLowerCase()) return false;
        if (params.win && !isNaN(parseInt(params.win)) && game.wins !== parseInt(params.win)) return false;
        if (params.scores && !compareScore(game.scores, parseInt(params.scores), params.scoreComparison)) return false;
        // Add more conditions as needed
        return true;
    });

    if (Object.values(params).every(value => value === '')) {
        displayNotFoundMessage();
    } else {
        displayGameData(filteredData);
    }
}



function displayGameData(data) {
    const tableBody = document.getElementById('gameTableBody');
    tableBody.innerHTML = '';
    data.forEach(game => {
        const row = document.createElement('tr');
        let rowData = '';
        for (const key in game) {
            rowData += `<td>${game[key]}</td>`;
        }
        row.innerHTML = rowData;
        tableBody.appendChild(row);
    });
}

document.getElementById('clearButton').addEventListener('click', function() {
    // Clear all input fields
    document.getElementById('id').value = '';
    document.getElementById('player').value = '';
    document.getElementById('score').value = '';
    document.getElementById('scoreComparison').value = '';
    document.getElementById('win').value = '';
    document.getElementById('before').value = '';
    document.getElementById('after').value = '';

    // Trigger search with empty filters to display all data
    filterAndDisplayGameData({});
});

function displayNotFoundMessage() {
    const tableBody = document.getElementById('gameTableBody');
    tableBody.innerHTML = '<tr><td colspan="2">Not Found</td></tr>';
}
